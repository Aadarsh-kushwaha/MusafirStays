<% layout("/layouts/boilerplate") %>
<!-- <%= success %> -->
<style> 

#filters {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  overflow-x: auto;
  padding: 1rem 0.5rem;
  scrollbar-width: none; /* Firefox */
}
#filters::-webkit-scrollbar { display: none; } /* Chrome/Safari */

.filter {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: 80px;
  cursor: pointer;
  color: #717171;
  transition: all 0.25s ease;
  border-bottom: 2px solid transparent;
}
.filter i {
  font-size: 1.3rem;
  margin-bottom: 6px;
  color: #717171;
}
.filter span {
  font-size: 0.85rem;
  font-weight: 500;
  white-space: nowrap;
}
.filter:hover,
.filter.active {
  color: #000;
  border-bottom: 2px solid #000;
}
.filter:hover i,
.filter.active i {
  color: #000;
}



</style>


<body class="bg-light py-4 px-3">
  <div class="container">
    <h2 class="mb-4 text-left text-primary fw-semibold">All Listed Guesthouses</h2>
   <div id="filters">
  <div class="filter"><i class="fa-solid fa-fire"></i><span>Trending</span></div>
  <div class="filter"><i class="fa-solid fa-bed"></i><span>Rooms</span></div>
  <div class="filter"><i class="fa-solid fa-star"></i><span>Top Rated</span></div>
  <div class="filter"><i class="fa-solid fa-tag"></i><span>Offers</span></div>
  <div class="filter"><i class="fa-solid fa-mountain-sun"></i><span>Mountains</span></div>
  <div class="filter"><i class="fa-solid fa-umbrella-beach"></i><span>Beach</span></div>
  <div class="filter"><i class="fa-solid fa-city"></i><span>City Life</span></div>
  <div class="filter"><i class="fa-solid fa-leaf"></i><span>Nature</span></div>
  <div class="filter"><i class="fa-solid fa-campground"></i><span>Camping</span></div>
  <div class="filter"><i class="fa-solid fa-person-shelter"></i><span>Cabins</span></div>
  <div class="filter"><i class="fa-solid fa-mountain-city"></i><span>Mountains</span></div>
</div>


    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4 mt-3">
      <% for (let listing of allListing) { %>
        <div class="col">
          <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
            <div class="card h-100 shadow-sm border-0 rounded-4 transition listing-card">
              <img
                src="<%= listing.image?.url || 'https://via.placeholder.com/400x300?text=No+Image' %>"
                class="card-img-top rounded-top-4"
                alt="listing image"
                style="height: 220px; object-fit: cover;"
              />
              <div class="card-body">
                <h5 class="card-title mb-2 fw-bold"><%= listing.title %></h5>

               <p class="card-text text-muted mb-1">
  <% if (listing.price != null) { %>
    ₹<%= listing.price.toLocaleString("en-IN") %> <small>/ night</small>
  <% } else { %>
    <span class="text-muted">Price not available</span>
  <% } %>
</p>


              </div>
            </div>
          </a>
        </div>
      <% } %>
    </div>
  </div>

  <!-- ✅ Scroll Animation Script -->
  <script>
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("show");
        } else {
          entry.target.classList.remove("show");
        }
      });
    }, {
      threshold: 0.1,
    });

    const cards = document.querySelectorAll(".card");
    cards.forEach((card, index) => {
      card.style.transitionDelay = `${index * 0.05}s`;
      observer.observe(card);
    });
  </script>

  <!-- ✅ CSS for scroll effect -->
  <style>
    .card {
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.6s ease;
    }

    .card.show {
      opacity: 1;
      transform: scale(1);
    }

    .hover-shadow:hover {
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    .transition {
      transition: 0.3s ease-in-out;
    }
  </style>
</body>
